---
phase: 03-core-configs
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - home/dot_zprofile.tmpl
  - home/dot_config/starship.toml
  - home/dot_config/zsh/aliases-git.zsh
  - home/dot_config/zsh/aliases-tools.zsh
  - home/dot_config/zsh/aliases-go.zsh
  - home/dot_config/zsh/aliases-pnpm.zsh
autonomous: true

must_haves:
  truths:
    - "Homebrew is in PATH on macOS after shell starts"
    - "Starship prompt displays correctly"
    - "All shell aliases work (ls shows eza output, cat shows bat output)"
  artifacts:
    - path: "home/dot_zprofile.tmpl"
      provides: "Homebrew shellenv for macOS"
      contains: "brew shellenv"
    - path: "home/dot_config/starship.toml"
      provides: "Starship prompt configuration"
      contains: "catppuccin_mocha"
    - path: "home/dot_config/zsh/aliases-git.zsh"
      provides: "Git aliases"
      contains: "alias gmm"
    - path: "home/dot_config/zsh/aliases-tools.zsh"
      provides: "Tool aliases (eza, bat)"
      contains: "alias ls='eza"
  key_links:
    - from: "home/dot_zshrc.tmpl"
      to: "home/dot_config/zsh/aliases-*.zsh"
      via: "source ~/.config/zsh/aliases-*.zsh"
      pattern: "source.*aliases-"
---

<objective>
Create static shell configuration files (zprofile, starship, aliases)

Purpose: Migrate the user's existing starship prompt config and modular alias files into chezmoi management. These files are static (no templating needed) and can be created in parallel with Plan 01.

Output: `dot_zprofile.tmpl`, `starship.toml`, and 4 alias files under `dot_config/zsh/`
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-core-configs/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dot_zprofile.tmpl with Homebrew shellenv</name>
  <files>home/dot_zprofile.tmpl</files>
  <action>
Create `dot_zprofile.tmpl` with platform-conditional Homebrew setup:

```
{{- if eq .chezmoi.os "darwin" }}
# Homebrew shellenv - sets PATH, HOMEBREW_PREFIX, etc.
eval "$(/opt/homebrew/bin/brew shellenv)"
{{- end }}
```

This file only contains content on macOS. On Linux it will be empty (or we could skip it entirely via .chezmoiignore, but an empty file is harmless).

Note: Use `.tmpl` extension because we need the OS conditional. The actual content is simple but platform-specific.
  </action>
  <verify>
- `cat home/dot_zprofile.tmpl` shows darwin conditional
- `chezmoi execute-template < home/dot_zprofile.tmpl` (on macOS) shows brew shellenv line
  </verify>
  <done>
dot_zprofile.tmpl exists with macOS-conditional Homebrew shellenv
  </done>
</task>

<task type="auto">
  <name>Task 2: Create starship.toml and alias files</name>
  <files>
home/dot_config/starship.toml
home/dot_config/zsh/aliases-git.zsh
home/dot_config/zsh/aliases-tools.zsh
home/dot_config/zsh/aliases-go.zsh
home/dot_config/zsh/aliases-pnpm.zsh
  </files>
  <action>
Copy the user's existing config files into chezmoi source:

1. **starship.toml** - Copy from `~/.config/starship.toml`
   - Destination: `home/dot_config/starship.toml`
   - This is a static file (no templating needed)
   - ~284 lines, catppuccin_mocha theme

2. **Alias files** - Copy from `~/.config/zsh/`:
   - `aliases-git.zsh` -> `home/dot_config/zsh/aliases-git.zsh`
     - Contains gmm, gunc, gbcopy, gbrl function
   - `aliases-tools.zsh` -> `home/dot_config/zsh/aliases-tools.zsh`
     - Contains eza (ls), bat (cat) aliases
   - `aliases-go.zsh` -> `home/dot_config/zsh/aliases-go.zsh`
     - Contains go build/test/run aliases
   - `aliases-pnpm.zsh` -> `home/dot_config/zsh/aliases-pnpm.zsh`
     - Contains pn, pni aliases

All alias files are static (no templating needed).

Create the directory structure: `home/dot_config/zsh/`
  </action>
  <verify>
- `ls home/dot_config/starship.toml` exists
- `ls home/dot_config/zsh/` shows 4 alias files
- `grep "catppuccin_mocha" home/dot_config/starship.toml` confirms starship content
- `grep "alias gmm" home/dot_config/zsh/aliases-git.zsh` confirms git aliases
  </verify>
  <done>
starship.toml and all 4 alias files exist in chezmoi source
  </done>
</task>

</tasks>

<verification>
1. `chezmoi diff ~/.zprofile` - shows templated content
2. `chezmoi diff ~/.config/starship.toml` - should show no diff (identical to source)
3. `chezmoi diff ~/.config/zsh/` - should show no diff for alias files
</verification>

<success_criteria>
- dot_zprofile.tmpl has darwin-conditional Homebrew shellenv
- starship.toml copied with full catppuccin_mocha theme
- All 4 alias files present under dot_config/zsh/
- Files are static (no .tmpl extension except zprofile)
</success_criteria>

<output>
After completion, create `.planning/phases/03-core-configs/03-02-SUMMARY.md`
</output>
