---
phase: 04-app-ecosystem
plan: 03
type: execute
wave: 3
depends_on: ["04-02"]
files_modified:
  - home/dot_config/bat/config
  - home/dot_config/fd/ignore
  - home/dot_config/ripgrep/config
  - home/dot_config/lazygit/config.yml
  - home/Library/Application Support/lazygit/config.yml
  - home/dot_zshrc.tmpl
autonomous: true

must_haves:
  truths:
    - "bat displays files with syntax highlighting and line numbers"
    - "fd ignores common directories (node_modules, .git)"
    - "ripgrep uses smart-case and hidden file search by default"
    - "lazygit uses delta for paging and nvim for editing"
    - "fzf uses fd for file listing with sensible defaults"
    - "eza shows icons automatically"
    - "zoxide echoes the directory it changes to"
  artifacts:
    - path: "home/dot_config/bat/config"
      provides: "bat default options"
      contains: "--theme"
    - path: "home/dot_config/fd/ignore"
      provides: "fd global ignore patterns"
      contains: "node_modules"
    - path: "home/dot_config/ripgrep/config"
      provides: "ripgrep default options"
      contains: "--smart-case"
    - path: "home/dot_config/lazygit/config.yml"
      provides: "lazygit settings (Linux path)"
      contains: "delta"
    - path: "home/Library/Application Support/lazygit/config.yml"
      provides: "lazygit settings (macOS path)"
      contains: "delta"
  key_links:
    - from: "home/dot_zshrc.tmpl"
      to: "CLI tools"
      via: "environment variables"
      pattern: "FZF_DEFAULT|RIPGREP_CONFIG|EZA_ICONS|_ZO_ECHO"
---

<objective>
Configure CLI tools (bat, fd, ripgrep, lazygit) with config files and add environment variables to zshrc for tools configured via env vars (fzf, eza, zoxide, jq)

Purpose: Ensure all CLI tools have optimal defaults that work consistently across devices
Output: Config files for bat/fd/ripgrep/lazygit + updated zshrc with CLI tool environment variables
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-app-ecosystem/04-RESEARCH.md

# Existing zshrc to update
@home/dot_zshrc.tmpl
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CLI tool config files</name>
  <files>
    home/dot_config/bat/config
    home/dot_config/fd/ignore
    home/dot_config/ripgrep/config
  </files>
  <action>
Create config files for bat, fd, and ripgrep:

1. **bat config** (`home/dot_config/bat/config`):
```
# bat configuration
# Syntax: one option per line

--theme="Catppuccin Mocha"
--style="numbers,changes,header"
--italic-text=always
--map-syntax "*.conf:INI"
--map-syntax "*.tmpl:Bash"
--map-syntax ".chezmoiignore:Git Ignore"
```

2. **fd ignore file** (`home/dot_config/fd/ignore`):
```
# fd global ignore patterns
# Uses .gitignore syntax

.git/
node_modules/
.cache/
*.pyc
__pycache__/
.DS_Store
.venv/
vendor/
dist/
build/
.next/
target/
```

3. **ripgrep config** (`home/dot_config/ripgrep/config`):
```
# ripgrep configuration
# Pointed to by RIPGREP_CONFIG_PATH env var

--smart-case
--hidden
--glob=!.git/
--glob=!node_modules/
--glob=!*.lock
--glob=!vendor/
--glob=!.venv/
```

Create directories as needed with `mkdir -p`.
  </action>
  <verify>Run `ls -la home/dot_config/bat/ home/dot_config/fd/ home/dot_config/ripgrep/` to confirm all config files exist</verify>
  <done>bat, fd, and ripgrep config files created with sensible defaults</done>
</task>

<task type="auto">
  <name>Task 2: Create lazygit config for both OS paths</name>
  <files>
    home/dot_config/lazygit/config.yml
    home/Library/Application Support/lazygit/config.yml
  </files>
  <action>
Create lazygit config in BOTH locations (same content, different paths per OS):

**Content for both files:**
```yaml
# lazygit configuration
gui:
  showIcons: true
  theme:
    activeBorderColor:
      - green
      - bold
    selectedLineBgColor:
      - reverse
git:
  paging:
    colorArg: always
    pager: delta --dark --paging=never
  autoFetch: true
os:
  editCommand: 'nvim'
  editCommandTemplate: '{{editor}} {{filename}}'
```

Create directories:
```bash
mkdir -p "home/dot_config/lazygit"
mkdir -p "home/Library/Application Support/lazygit"
```

Note: The .chezmoiignore (updated in Plan 02) ensures only the correct path is applied per OS:
- macOS: uses `Library/Application Support/lazygit/`
- Linux: uses `.config/lazygit/`
  </action>
  <verify>Run `cat "home/dot_config/lazygit/config.yml"` and `cat "home/Library/Application Support/lazygit/config.yml"` to confirm identical content</verify>
  <done>lazygit config exists in both OS-specific paths with delta paging and nvim editor</done>
</task>

<task type="auto">
  <name>Task 3: Add CLI tool environment variables to zshrc</name>
  <files>home/dot_zshrc.tmpl</files>
  <action>
Update `dot_zshrc.tmpl` to add a new section for CLI tool configuration.

Add this section AFTER the "Environment Variables" section and BEFORE "Oh My Zsh Configuration":

```zsh
# ============================================================================
# CLI Tool Configuration
# ============================================================================

# fzf - fuzzy finder defaults
export FZF_DEFAULT_COMMAND='fd --type f --hidden --exclude .git'
export FZF_DEFAULT_OPTS='
  --height 40%
  --layout=reverse
  --border
  --info=inline
'
export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
export FZF_ALT_C_COMMAND='fd --type d --hidden --exclude .git'

# ripgrep - point to config file
export RIPGREP_CONFIG_PATH="$HOME/.config/ripgrep/config"

# eza - enable icons by default
export EZA_ICONS_AUTO=1

# zoxide - echo directory after cd
export _ZO_ECHO=1
```

Insert this section so the file structure becomes:
1. Environment Variables (existing)
2. CLI Tool Configuration (NEW)
3. Oh My Zsh Configuration (existing)
4. ... rest of file
  </action>
  <verify>Run `grep -A 20 "CLI Tool Configuration" home/dot_zshrc.tmpl` to confirm the new section exists with all env vars</verify>
  <done>zshrc contains CLI tool env vars for fzf, ripgrep, eza, and zoxide</done>
</task>

</tasks>

<verification>
1. `chezmoi diff` shows new config files for bat, fd, ripgrep, lazygit
2. `chezmoi diff` shows zshrc changes with CLI tool section
3. `chezmoi managed | grep -E "(bat|fd|ripgrep|lazygit)"` lists all new paths
4. Template renders correctly: `chezmoi execute-template < home/dot_zshrc.tmpl | grep FZF_DEFAULT`
</verification>

<success_criteria>
- bat config with Catppuccin theme and syntax mappings
- fd ignore file with common exclusion patterns
- ripgrep config with smart-case and hidden file support
- lazygit config in both OS paths with delta paging
- zshrc has FZF_DEFAULT_COMMAND, FZF_DEFAULT_OPTS, RIPGREP_CONFIG_PATH, EZA_ICONS_AUTO, _ZO_ECHO
- All CLI tools will have sensible defaults after `chezmoi apply`
</success_criteria>

<output>
After completion, create `.planning/phases/04-app-ecosystem/04-03-SUMMARY.md`
</output>
